(()=>{"use strict";const t=window.localStorage,e=(e,s)=>{const n=JSON.stringify(s);try{t.setItem(e,n)}catch(t){alert(`${e} 추가에 실패 했습니다. 총 데이터 용량이 5MB를 초과된 경우일 수 있습니다.`)}},s=(e,s)=>{const n=t.getItem(e);return JSON.parse(n)||s};new class{constructor({$target:t}){this.$top=new class{constructor({$target:t}){this.$top=document.createElement("header"),t.append(this.$top),this.$searchBar=new class{$searchForm=document.createElement("form");constructor({$target:t}){this.$searchInput=new class{$searchInput=document.createElement("input");searchEngine="Google";constructor({$target:t}){this.$searchInput.placeholder="Google",this.$searchInput.addEventListener("keydown",this.handleEnter),t.append(this.$searchInput)}handleEnter(t){if("Enter"===t.key){let e=t.target.value;window.open(`https://google.com/search?q=${e}`),e=""}}}({$target:this.$searchForm}),this.$chooseSearchEngein=new class{constructor({$target:t}){}}({$target:this.$searchForm}),t.append(this.$searchForm)}}({$target:this.$top}),this.$weather=new class{weatherData;isLoading=!0;$weather=document.createElement("section");constructor({$target:t}){this.$target=t,this.$weather.classList.add("weather"),this.$target.append(this.$weather),setInterval(this.render(),6e4)}toggleIsLoading=()=>{this.isLoading=!this.isLoading};showWeather=async t=>{const{latitude:e,longitude:s}=t.coords,n=await(async([t=33.44,e=-94.04])=>{const s=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${t}&lon=${e}&appid=320e9afb47e04d7cecf01d98bc8c1844`);return await s.json()})([e,s]);this.toggleIsLoading();const i=n.weather[0].main,a=n.main.temp-273.15,o=n.weather[0].icon;this.$weather.innerHTML=`\n    <div>\n      <div>${i}</div>\n      <div>${Math.round(a)}°C</div>\n    </div>\n    `;const r=document.createElement("img");r.classList.add("날씨그림"),r.src=`http://openweathermap.org/img/wn/${o}@2x.png`,this.$weather.append(r)};render=()=>{this.isLoading&&(this.$weather.innerHTML="~ Loading ~"),navigator?.geolocation&&navigator.geolocation.getCurrentPosition(this.showWeather,(t=>{alert("위치 추적을 허용하지 않았거나 크롬 브라우저가 아닌 경우 날씨가 표시되지 않을 수 있습니다."),console.error(t)}))}}({$target:this.$top})}}({$target:t}),this.$main=new class{$center=document.createElement("main");constructor({$target:t}){t.append(this.$center),this.clock=new class{$시계=document.createElement("div");constructor({$target:t}){this.$시계.classList.add("현재시간"),t.append(this.$시계),this.showTimenow()}영추가=t=>t<10?"0"+t:t;showTimenow=()=>{setInterval((()=>{const t=new Date;this.$시계.innerHTML=`${this.영추가(t.getHours())}:${this.영추가(t.getMinutes())}`}),1e3)}}({$target:this.$center}),this.Greeting=new class{#t=s("userName","");isNameChanging=!this.#t;$greeting=document.createElement("section");$userNameChangeButton=document.createElement("button");constructor({$target:t}){this.$greetingMessage=new class{#t;$greetingMessage=document.createElement("div");constructor({$target:t,userName:e}){this.#t=e,this.$greetingMessage.classList.add("greeting-message"),t.append(this.$greetingMessage),this.render()}setUserName=t=>{this.#t=t,this.render()};render=()=>{this.$greetingMessage.innerText=`안녕하세요${this.#t&&` ${this.#t}님`}!`}}({$target:t,userName:this.#t}),this.$userNameInput=new class{$userNameInput=document.createElement("input");constructor({$target:t,onSubmit:e}){this.$userNameInput.placeholder="이름을 알려주세요.",this.$userNameInput.classList.add("user-name-input"),this.$userNameInput.addEventListener("keydown",(t=>{if("Enter"===t.key){const s=t.target.value;s&&(e(s),this.$userNameInput.value="",this.$userNameInput.hidden=!0)}})),t.append(this.$userNameInput)}}({$target:this.$greeting,onSubmit:this.handleNameChange,isNameChanging:this.isNameChanging}),this.$userNameChangeButton.innerText="이름 변경",this.isNameChanging?this.$userNameChangeButton.hidden=!0:this.$userNameInput.$userNameInput.hidden=!0,this.$userNameChangeButton.addEventListener("click",(t=>{this.$userNameChangeButton.hidden=!0,this.$userNameInput.$userNameInput.hidden=!1})),this.$greeting.append(this.$userNameChangeButton),t.append(this.$greeting)}handleNameChange=t=>{this.setUserName(t),this.$userNameChangeButton.hidden=!1};setUserName=t=>{this.#t=t,e("userName",this.#t),this.$greetingMessage.setUserName(this.#t)}}({$target:this.$center}),this.$center.addEventListener("hover",this.handleHover)}}({$target:t}),this.$bottom=new class{constructor({$target:t}){this.$bottom=document.createElement("footer"),t.append(this.$bottom),this.setting=new class{$setting=document.createElement("i");constructor({$target:t}){this.$setting.classList.add("fa-solid","fa-gear","fa-2xl","손가락"),this.$setting.addEventListener("click",this.handleClick),t.append(this.$setting)}handleClick=t=>{alert("개발 예정입니다.")}}({$target:this.$bottom}),this.todo=new class{#e=s("toDo",[]).filter((t=>!1===t.isCompleted));constructor({$target:t}){const e=document.createElement("section");e.classList.add("todo-container"),t.append(e),this.$toDoList=new class{$toDoList=document.createElement("div");#e;constructor({$target:t,initialToDos:e,onToDoClick:s}){this.$target=t,this.#e=e,this.onToDoClick=s,this.$toDoList.addEventListener("click",this.handleToDoClick.bind(this)),this.$target.insertAdjacentElement("beforeend",this.$toDoList),this.render()}handleToDoClick=t=>{const e=t.target.closest("li");this.onToDoClick(e.dataset.id)};render=()=>{this.$toDoList.innerHTML=`<ul>${this.#e.map((({toDo:t,isCompleted:e},s)=>`<li data-id="${s}" class="할일 ${e&&"할일완료"}"><input type="checkbox" ${e&&"checked"}> ${t}</li>`)).join("")}</ul>`};setToDos=t=>{this.#e=t,this.render()}}({$target:e,initialToDos:this.#e,onToDoClick:this.handleToDoClick}),this.$toDoInput=new class{$form=document.createElement("form");$input=document.createElement("input");constructor({$target:t,onSubmit:e}){this.$target=t,this.onSubmit=e,this.$input.classList.add("to-do-input"),this.$input.placeholder="새 할일",this.$form.addEventListener("submit",this.handleSubmit.bind(this)),this.$form.append(this.$input),this.$target.insertAdjacentElement("afterbegin",this.$form)}handleSubmit=t=>{t.preventDefault();const e=this.$input.value;e&&(this.onSubmit(e),this.$input.value="")}}({$target:e,onSubmit:this.handleToDoSubmit})}handleToDoClick=t=>{const e=this.#e;e[t].isCompleted=!e[t].isCompleted,this.setToDos(this.#e)};handleToDoSubmit=t=>{const e=[...this.#e,{toDo:t,isCompleted:!1}];this.setToDos(e)};setToDos=t=>{this.#e=t,e("toDo",this.#e),this.$toDoList.setToDos(this.#e)}}({$target:this.$bottom})}}({$target:t})}}({$target:document.getElementById("app")})})();